define("widgets/utils/widgetModel",["lodash","compUtils"],function(a,b){"use strict";function c(a,c){var d=b.compFactory.getCompReactClass(c);if(d&&d.publicState){return d.publicState(null,a)}return{}}function d(b,d){var e=b.getCompType(d);var f={data:b.getCompData(d),props:b.getCompProps(d)};var h=b.getCompState(d)||c(f,e);return a.assign(f,{parent:b.getParentId(d),type:e,state:h,layout:b.getCompLayout(d),design:b.getCompDesign(d),isDisplayed:g(b,d),id:b.getCompName(d),events:[]})}var e="wysiwyg.viewer.components.BoxSlideShowSlide";function f(a,b){var c=a.getParentId(b);var d=a.getCompState(c);var e=a.getCompStructure(c);var f=e&&d&&e.components[d.currentIndex];return f&&f.id}function g(a,b){var c=b;while(c){if(a.getCompType(c)===e){var d=c;var g=f(a,c);return d===g}c=a.getParentId(c)}return a.isDisplayed(b)}function h(b,c,d){var e=a.reduce(b,function(b,e){var f=c.getCompConnections(e);var g=a.map(f,function(b){var c;if(b.type==="WixCodeConnectionItem"){c=a.assign({},b,{controllerId:d,config:null})}else{c=a.defaults({},b,{config:null})}return{connection:c,compId:e}});return b.concat(g)},[]);return e}function i(b,c,d){var e=h(c,b,d);return a(e).groupBy("connection.controllerId").mapValues(function(b){return a(b).groupBy("connection.role").mapValues(function(b){return a(b).keyBy("compId").mapValues("connection.config").value()}).value()}).value()}return{getCompModel:d,getConnectionsModel:i}});define("widgets/utils/wixCodeRemoteModelService",["lodash","platformUtils","siteUtils","widgets/utils/widgetModel"],function(a,b,c,d){"use strict";var e=b.RemoteModelInterface;var f=function(b,f,g,h,i,j,k,l){var m=new e(undefined,k);a.forEach(f,function(c){var e=d.getCompModel(b,c);var f=a.get(e.data,"widgetId");a.assign(e,{publicAPI:j[f]});m.addComponent(c,e)});m.addPagesData(i,g);m.addPopups(h);m.addConnections(d.getConnectionsModel(b,f,l));m.addEventTypes(c.constants.ACTION_TYPES);return m};var g=function(a,b){return new e(a,b)};return{generateRemoteModelInterface:f,createRemoteModelInterface:g}});define("widgets/core/widgetDataHelper",["lodash"],function(a){"use strict";return{registerWidgetHandler:function(b,c){a.set(b,"widgetHandler",c)},getWidgetHandler:function(b){return a.get(b,"widgetHandler")}}});define("widgets/core/dataResolvers/pageLinkDataResolver",["lodash","experiment"],function(a,b){"use strict";function c(b,c){if(b==="#"){return"#"+c.getMainPageId()}var d=c.findDataOnMasterPageByPredicate(function(a){return a.pageUriSEO===b.replace("#","")});var e=a.get(d,"id",b);return!a.startsWith(e,"#")?"#"+e:e}function d(b,c){var d=a.compact(b.replace(/^#/,"").split("/"));var e=a.findKey(c.getRouters(),{prefix:d[0]});if(e){return{type:"DynamicPageLink",routerId:e,innerRoute:d.slice(1).join("/")}}}function e(b){var c=[];var d=a.get(b,"link");if(d){c.push(d)}var f=a.get(b,"linkList");if(f){c=c.concat(f)}a.forEach(b,function(b){if(a.isObject(b)){c=c.concat(e(b))}});return c}function f(b,c){var d=a.reduce(c.columns,function(a,b){if(b.linkPath){a.push(b.linkPath)}return a},[]);var e=[];if(d.length>0){a.forEach(b.rows,function(b){a.forEach(d,function(c){var d=c+"_linkObj";var f=a.get(b,d);if(!a.isUndefined(f)){e.push(f)}})})}return e}function g(g,h,i){var j=h.getSiteData();var k;if(g.type==="Grid"){k=f(g,i)}else{k=e(g)}a.forEach(k,function(e){var f=e.type;var g=e.pageId;if(f==="PageLink"||f==="AnchorLink"){if(a.isString(g)){if(b.isOpen("sv_dpages")){var h=d(e.pageId,j);if(h){a.assign(e,h);delete e.pageId}else{e.pageId=c(g,j)}}else{e.pageId=c(g,j)}}}});return g}return{resolve:g}});define("widgets/core/dataResolvers/emptyImageDataResolver",["lodash"],function(a){"use strict";var b="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";function c(c){if(!c.uri){return a.assign({},c,{uri:b})}return c}function d(b){if(b.type==="Image"){return c(b)}if(b.type==="ImageList"){return a.assign({},b,{items:b.items&&b.items.map(c)})}return b}return{resolve:d}});define("widgets/core/widgetDataResolvers",["lodash","widgets/core/dataResolvers/pageLinkDataResolver","widgets/core/dataResolvers/emptyImageDataResolver"],function(a,b,c){"use strict";var d=[b,c];return{resolve:function(b,c,e){a.forEach(d,function(a){b=a.resolve(b,c,e)});return b}}});define("widgets/core/modelBuilderDataHelper",["lodash"],function(a){"use strict";var b={PAGE:"Page",POPUP:"Popup",UNKNOWN:"Unknown"};function c(a){return{fetchData:a.getDataByQuery.bind(a),fetchPagesData:a.getPagesDataForRmi.bind(a),fetchPopupsData:a.getPopupsDataForRmi.bind(a),fetchRoutersData:a.getRoutersDataForRmi.bind(a),fetchPublicAPI:a.getPublicAPIDataForRmi.bind(a)}}var d=["Page","AppPage"];function e(c){if(!a.includes(d,a.get(c,"type"))){return b.UNKNOWN}return a.get(c,"isPopup")?b.POPUP:b.PAGE}return{getApi:c,getWidgetType:e,WIDGET_TYPES:b}});define("widgets/core/modelBuilder",["lodash","coreUtils","widgets/utils/wixCodeRemoteModelService","widgets/core/modelBuilderDataHelper"],function(a,b,c,d){"use strict";var e=b.siteConstants;function f(b,d,e,f,g,h,i){return a.mapValues(d,function(a,d){return c.generateRemoteModelInterface(b,a,f(),g(),h(),i(),e,d)})}function g(b,c){var d=[e.PAGES_CONTAINER_ID,e.SITE_PAGES_ID];var f=c(b,b);return a(f).omit([e.SITE_STRUCTURE_ID]).keys().difference(d).value()}function h(a,b){var c=b(a,a);var e=d.getWidgetType(c);return e===d.WIDGET_TYPES.PAGE}function i(c,d,e){var f=b.siteConstants.MASTER_PAGE_ID;var i=g(f,d);var j=a.without(c,f);return a.transform(j,function(a,b){a[b]=g(b,d);if(h(b,e)){a[b]=a[b].concat(i)}},{})}function j(a,b,c,e,g){var h=d.getApi(b);var j=i(c,g,h.fetchData);return f(a,j,e,h.fetchRoutersData,h.fetchPopupsData,h.fetchPagesData,h.fetchPublicAPI)}return{build:j}});define("widgets/messages/messageBuilder",[],function(){"use strict";function a(a,b){return{type:"load_user_code",widgets:a,rootIds:b}}function b(a,b,c,d){return{type:"load_widgets",sdkParameters:{referrer:typeof window==="undefined"?"":window.document.referrer},widgets:a,rootIds:c,routersMap:b||{},popupContexts:d||{}}}function c(a){return{type:"init_widgets",controllers:a}}function d(a,b){return{type:"start_widgets",contexts:a,siteInfo:b}}function e(a){return{type:"stop_widgets",widgetIds:a}}function f(a,b){return{type:"update",contextId:a,updates:b}}return{loadWidgetsMessage:b,loadUserCodesMessage:a,initWidgetsMessage:c,startWidgetsMessage:d,stopWidgetsMessage:e,updateWidgetMessage:f}});define("widgets/core/RemoteWidgetHandlerProxy",["lodash","core","utils","widgets/core/widgetDataResolvers","widgets/core/modelBuilder","widgets/messages/messageBuilder"],function(a,b,c,d,e,f){"use strict";var g={State:"stateChanged",Data:"dataChanged",Design:"designChanged",Props:"propsChanged",EventRegister:"registerEvent",EventUnregisterAll:"unregisterAll",Layout:"layoutChanged",Behavior:"executeBehavior"};var h={WidgetReady:"widget_ready"};function i(b,c,d,e){var f={data:this._runtimeDal.setCompData.bind(this._runtimeDal),design:this._runtimeDal.setCompDesign.bind(this._runtimeDal),props:this._runtimeDal.setCompProps.bind(this._runtimeDal),layout:this._runtimeDal.updateCompLayout.bind(this._runtimeDal),registerEvent:j.bind(this),unregisterAll:k.bind(this)};f[c](b,d);if(a.isFunction(this._onUpdateCallback)){this._onUpdateCallback(e)}}function j(a,b){var c={action:{type:"comp",name:b.eventType,sourceId:a},behavior:{type:"widget",targetId:b.contextId,params:{callbackId:b.callbackId,compId:a},name:"runCode"}};this._runtimeDal.addActionsAndBehaviors(a,c)}function k(a,b){this._runtimeDal.removeActionsAndBehaviors(a,{action:{name:b.eventType}})}function l(a){var b=this._siteAPI.getSiteDataAPI().document;var c=b.getAllCompsUnderRoot.bind(b);return e.build(this._siteAPI.getRuntimeDal(),this._siteAPI.getSiteData(),a,i.bind(this),c)}function m(){var a=this._siteAPI.getSiteData();return{deviceType:a.isMobileView()?"mobile":"desktop"}}function n(a,b){var c=function(){if(this.isWidgetReady(a.contextId)){this.handleCommand(a,b);return}n.call(this,a,b)};this._actionQueue.addItem(c.bind(this))}function o(a){if(this._isFlushingPendingCommands){return}var b=this;this._isFlushingPendingCommands=true;var d=function(){b._isFlushingPendingCommands=false;b._actionQueue.flush();p(b._commandsFlushListeners)};if(a){d();return}c.animationFrame.request(d)}function p(b){a.forEach(b,function(a){return a()})}function q(a,b){this._runtimeDal=a.getRuntimeDal();this._siteAPI=a;this._remoteModelInterfaces={};this._onUpdateCallback=b;this._receivedChanges=undefined;this._isFlushingPendingCommands=false;this._readyWidgets={};this._commandsFlushListeners=[];this._actionQueue=a.getSiteDataAPI().getActionQueue()}function r(a){return this._remoteModelInterfaces[a]}function s(b){var c=a.merge(a.pick(b,"id"),a.pickBy(b,a.negate(a.isObject)));c.nativeEvent=a.pickBy(b.nativeEvent,a.negate(a.isObject));if(b.data){c.data=b.data}return c}q.prototype.initWidgets=function(a){var b=f.initWidgetsMessage(a);this._sendMessage(b)};q.prototype.startWidgets=function(b){if(a.isEmpty(b)){return}a.assign(this._remoteModelInterfaces,l.call(this,b));var c=a.mapValues(this._remoteModelInterfaces,function(a){return a.toJson()});var d=m.call(this);var e=f.startWidgetsMessage(a.pick(c,b),d);this._sendMessage(e)};q.prototype.loadUserCode=function(a,b){var c=f.loadUserCodesMessage(a,b);this._sendMessage(c)};q.prototype.loadWidgets=function(b,c){this.loadUserCode(b,c);var d=a(c).transform(function(a,b){a[b]=this._runtimeDal.getPopupContext(b)}.bind(this),{}).omitBy(a.isUndefined).value();var e=f.loadWidgetsMessage(b,this._siteAPI.getSiteData().getRouters(),c,d);this._sendMessage(e)};q.prototype.getActiveWidgetIds=function(){return a.keys(this._remoteModelInterfaces)};q.prototype.stopWidgets=function(b){if(a.isEmpty(b)){return}a.forEach(b,function(a){delete this._remoteModelInterfaces[a];this._readyWidgets[a]=false}.bind(this));var c=f.stopWidgetsMessage(b);this._sendMessage(c)};q.prototype.stopAllWidgets=function(){this.stopWidgets(a.keys(this._remoteModelInterfaces))};q.prototype.updateComponent=function(a){this._sendMessage(a)};q.prototype.handleWidgetUpdate=function(b){var c=a(b).keys().head();var d=a.pickBy(this._remoteModelInterfaces,function(b){return a.has(b.toJson(),["components",c])});var e=a.find(a.find(b));if(!a.isEmpty(d)&&!a.isEqual(this._receivedChanges,e)){var g=a(d).keys().head();d[g].updateModel(b);var h=f.updateWidgetMessage(g,b);this._sendMessage(h)}};function t(b,c,e,f){var g=a.assign({},c.getCompData(e),f);var h=c.getCompProps(e);return d.resolve(g,b,h)}q.prototype.handleRemoteMessage=function(b){switch(b.type){case h.WidgetReady:if(r.call(this,b.widgetId)){this._readyWidgets[b.widgetId]=true;var c=function(){this._commandsFlushListeners=a.without(this._commandsFlushListeners,c);this._siteAPI.forceUpdate()}.bind(this);this._commandsFlushListeners.push(c);o.call(this)}break}};q.prototype.onCommand=function(a,b){n.call(this,a,b);if(this.isWidgetReady(a.contextId)){o.call(this,a.command===g.EventRegister)}};q.prototype.handleCommand=function(a,c){this._receivedChanges=a.data;var d=this._remoteModelInterfaces[a.contextId];if(!d){return}switch(a.command){case g.State:d.setState(a.compId,a.data);break;case g.Data:a.data=t(this._siteAPI,this._runtimeDal,a.compId,a.data);d.setData(a.compId,a.data);break;case g.Design:d.setDesign(a.compId,a.data);break;case g.Layout:d.setLayout(a.compId,a.data);break;case g.Props:d.setProps(a.compId,a.data,c);break;case g.EventRegister:d.registerEvent(a.contextId,a.compId,a.data.eventType,a.data.callbackId);break;case g.EventUnregisterAll:d.unregisterAll(a.compId,a.data.eventType);break;case g.Behavior:var e=a.data;var f={group:"command",callback:c};b.behaviorsService.handleBehaviors(this._siteAPI,[e],f,e.type);break}this._receivedChanges=undefined};q.prototype.handleEvent=function(a,b,c,d){var e;switch(b){case"runCode":e={intent:"WIX_CODE",type:"wix_code_run_user_function",contextId:a,callbackId:c.callbackId,compId:c.compId,event:s(d)};break;default:break}this._sendMessage(e)};q.prototype.isWidgetReady=function(a){return!!this._readyWidgets[a]};q.prototype._sendMessage=function(a){var b=this._siteAPI.getWixCodeAppApi();b.sendMessage(a)};q.prototype.registerCommandsFlushedListener=function(b){if(!a.isFunction(b)){throw new TypeError("The callback provided is not a function.")}this._commandsFlushListeners.push(b)};return q});define("widgets/core/widgetService",["lodash","utils","widgets/utils/widgetModel","widgets/core/widgetDataHelper","widgets/core/RemoteWidgetHandlerProxy","coreUtils","wixCodeInit"],function(a,b,c,d,e,f,g){"use strict";function h(a){return!!a.renderFlags.initWixCode}function i(a,b){var c=new e(a,b);x(a,c)}function j(b,c,d){var e={dataChange:"data",propsChange:"props",stateChange:"state",layoutChange:"layout"};var f=a.zipObject([e[d.type]],[d.value]);var g=a.zipObject([c],[f]);y(b).handleWidgetUpdate(g)}function k(b,d,e){if(!a.includes(b.getAllRenderedRootIds(),d)){return}var f=b.getRuntimeDal();var g=b.getSiteDataAPI();var h=g.document.getAllCompsUnderRoot(d,e);var i=a(h).omit(["masterPage"]).mapValues(function(a){return c.getCompModel(f,a.id)}).value();y(b).handleWidgetUpdate(i)}function l(a,b,c){k(a,b,c)}function m(b,c,d){var e=a.difference(b,a.map(c,"rootId"));if(!a.isEmpty(e)){c=B(d,c,b);D(d,e)}return c}function n(b,c){return a.map(b,function(b){return a.includes(c,b.rootId)?a.assign(b,{started:true}):b})}function o(c,d,e){var f=c.getSiteData();var h=y(c);e=a.without(e,b.siteConstants.MASTER_PAGE_ID);var i=g.appsUtils.getApplications(f.getClientSpecMap(),e,f);if(a.isEmpty(i)){return d}d=m(e,d,c);var j=a(d).reject({started:true}).map("rootId").value();if(a.isEmpty(j)){return d}h.startWidgets(j);d=n(d,j);return d}function p(b,c){var d=a.reject(b,function(b){return a.includes(c,b.rootId)});return a.map(d,"rootId")}function q(b,c,d){var e=y(b);if(a.isEmpty(d)||a.isEmpty(c)){return c}e.stopWidgets(d);return a.reject(c,function(b){return a.includes(d,b.rootId)})}function r(b,c){var d=a.without(b.getRootIdsWhichShouldBeRendered(),"masterPage");if(h(b.getSiteData())){var e=p(c,d);c=q(b,c,e);return o(b,c,d)}return q(b,c,d)}function s(c,d){var e=d.getPageData(c);var f=[{id:c,json:e}];if(a.get(d.getDataByQuery(c),"isPopup")){return f}var g=b.siteConstants.MASTER_PAGE_ID;return f.concat({id:g,json:d.getPageData(g)})}function t(b,c){return a(b).transform(function(b,c){a.assign(b,a.get(c,"data.connections_data"))},{}).values().flatMap(function(b){var d=c.resolveData(b,null,c.dataTypes.CONNECTIONS);return a.get(d,"items")}).groupBy("controllerId").value()}function u(a){return a.componentType==="platform.components.AppController"}function v(b,c){var d=t(a.map(b,"json"),c);return a(b).map(function(b){return{rootId:b.id,controllers:f.dataUtils.getAllCompsInStructure(a.get(b,"json.structure"),false,u)}}).flatMap(function(b){return a.map(b.controllers,function(e){var f=e.dataQuery.replace("#","");return a.omitBy(a.merge({controllerBehaviors:a.get(c.getDataByQuery(e.behaviorQuery,b.rootId,c.dataTypes.BEHAVIORS),"items",[]),controllerData:c.getDataByQuery(f,b.rootId),controllerId:f,compId:e.id},{connections:a.get(d,f)}),a.isUndefined)})}).value()}function w(b){return a(b).groupBy(function(b){return a.get(b,"controllerData.applicationId")}).mapValues(function(b){return a(b).groupBy("controllerId").mapValues(function(b){return a.pick(a.head(b),["controllerData","controllerBehaviors","connections","compId"])}).value()}).value()}function x(a,b){var c=a.getSiteData().widgetsStore;d.registerWidgetHandler(c,b)}function y(a){var b=a.getSiteData().widgetsStore;return d.getWidgetHandler(b)}function z(c,d){return a(c).without(b.siteConstants.MASTER_PAGE_ID).filter(d.getPageTitle.bind(d)).value()}function A(b,c){var d=b.getSiteData();var e=z(c,d);var f=g.appsUtils.getUserCodeDefinitions(d.getClientSpecMap(),e,d);if(!a.isEmpty(f)){var h=y(b);h.loadUserCode(f,e)}}function B(b,c,d){var e=b.getSiteData();var f=z(d,e);var h=a(f).difference(a.map(c,"rootId")).thru(a.isEmpty).value();if(h){return c}var i=g.appsUtils.getApplications(e.getClientSpecMap(),f,e);if(a.isEmpty(i)){return c}var j=y(b);j.loadWidgets(i,f);var k=a.map(f,function(a){return{rootId:a}});return c.concat(k)}function C(a,b){var c=s(b,a);var d=v(c,a);return w(d)}function D(c,d){var e=c.getSiteData();var f=a(d).without(b.siteConstants.MASTER_PAGE_ID).transform(function(a,b){a[b]=C(e,b)},{}).omitBy(a.isEmpty).value();if(a.isEmpty(f)){return}var g=y(c);g.initWidgets(f)}function E(b,c,d){var e=a(b.getAllRenderedRootIds()).intersection(d).thru(a.isEmpty).value();if(e){return c}return q(b,c,d)}function F(a){return a.getWixCodeAppApi()}function G(a,b){var c=F(a);c.registerMessageHandler(b)}function H(a,b){var c=F(a);c.registerMessageModifier(b)}function I(a,b){var c=F(a);c.sendMessage(b)}return{getWidgetHandler:y,syncAppsState:r,handleRuntimeDalCompChange:j,handleDisplayedJsonUpdate:l,updateCompsUnderRoot:k,createAndRegisterWidgetHandler:i,loadUserCode:A,loadApps:B,initApps:D,stopApps:E,getControllersToInit:C,registerWidgetMessageHandler:G,registerWidgetMessageModifier:H,sendMessageToWidget:I}});define("widgets/core/WidgetAspect",["lodash","coreUtils","widgets/core/widgetDataHelper","widgets/core/widgetService","widgets/core/modelBuilderDataHelper","experiment"],function(a,b,c,d,e,f){"use strict";function g(b){this._siteAPI=b;this._loadedAppsRoots=[];this._updateSiteCallBacks=[];this._updating=false;d.createAndRegisterWidgetHandler(b,this.updateSite.bind(this));if(f.isOpen("sv_platform1")){this._siteAPI.registerToSiteWillMount(h.bind(this));this._siteAPI.registerToSiteWillUpdate(h.bind(this))}this._siteAPI.getRuntimeDal().registerChangeListener(a.partial(d.handleRuntimeDalCompChange,this._siteAPI));this._siteAPI.getSiteDataAPI().registerDisplayedJsonUpdateCallback(a.partial(d.handleDisplayedJsonUpdate,this._siteAPI));this._siteAPI.registerToFakeModeChange(a.partial(d.updateCompsUnderRoot,this._siteAPI));this.getWidgetHandler=a.partial(d.getWidgetHandler,this._siteAPI)}function h(){this._loadedAppsRoots=d.syncAppsState(this._siteAPI,this._loadedAppsRoots)}g.prototype.init=function(){this._loadedAppsRoots=[];this._updateSiteCallBacks=[];this._updating=false};g.prototype.updateSite=function(c){if(c){this._updateSiteCallBacks.push(c)}if(!this._updating){this._updating=true;var d=this;b.animationFrame.request(function(){d._updating=false;a.invokeMap(d._updateSiteCallBacks,a.call);d._updateSiteCallBacks=[]})}};function i(b,c,d){if(b!=="masterPage"){return b}return a.find(c,function(a){var b=d.getDataByQuery(a);return e.getWidgetType(b)===e.WIDGET_TYPES.PAGE})}g.prototype.allContextsReady=function(){return a(this._loadedAppsRoots).map("rootId").every(this.isContextReady.bind(this))};g.prototype.isContextReady=function(b){var d=this._siteAPI.getSiteData();var e=d.widgetsStore;var f=c.getWidgetHandler(e);var g=a.map(this._loadedAppsRoots,"rootId");var h=i(b,g,d);if(a.isEmpty(this._loadedAppsRoots)){return true}return a.includes(g,h)&&f.isWidgetReady(h)};g.prototype.loadUserCode=function(a){d.loadUserCode(this._siteAPI,a)};g.prototype.loadApps=function(a){if(!this._siteAPI.getSiteData().renderFlags.initWixCode){return}d.loadUserCode(this._siteAPI,a);this._loadedAppsRoots=d.loadApps(this._siteAPI,this._loadedAppsRoots,a)};g.prototype.initApps=function(a){if(!this._siteAPI.getSiteData().renderFlags.initWixCode){return}d.initApps(this._siteAPI,a)};g.prototype.stopApps=function(a){this._loadedAppsRoots=d.stopApps(this._siteAPI,this._loadedAppsRoots,a)};g.prototype.restartApps=function(){if(a.isEmpty(this._loadedAppsRoots)){return}var b=a.map(this._loadedAppsRoots,"rootId");this.stopApps(b);this.loadApps(b);this.initApps(b)};return g});define("widgets/behaviors/widgetBehaviorHandler",["lodash"],function(a){"use strict";var b=["type","name","targetId"];function c(b,c,d){var e=c.getSiteAspect("WidgetAspect");var f=e.getWidgetHandler();a.forEach(b,function(a){f.handleEvent(a.targetId,a.name,a.params,d)})}function d(c){var d=a.at(c,b);d.push(c.params.callbackId);d.push(c.params.compId);return d.join(",")}return{handle:c,getUniqueIdentifier:d}});define("widgets/behaviors/widgetBehaviorPreprocessor",["lodash"],function(a){"use strict";function b(a,b){var c=a.getRuntimeDal().getPageId(b);if(!c){return null}if(c==="masterPage"){return a.getSiteData().getFocusedRootId()}return c}function c(c,d,e){return a.assign({},c,{targetId:b(e,d.sourceId)})}return c});define("widgets",["core","widgets/utils/wixCodeRemoteModelService","widgets/core/WidgetAspect","widgets/core/widgetDataHelper","widgets/core/modelBuilder","widgets/behaviors/widgetBehaviorHandler","widgets/behaviors/widgetBehaviorPreprocessor","widgets/messages/messageBuilder","widgets/utils/widgetModel","widgets/core/widgetService"],function(a,b,c,d,e,f,g,h,i,j){"use strict";a.behaviorHandlersFactory.registerHandler("widget",f);a.behaviorHandlersFactory.registerBehaviorPreprocessor("widget",g);a.siteAspectsRegistry.registerSiteAspect("WidgetAspect",c);return{wixCodeRemoteModelService:b,widgetDataHelper:d,messageBuilder:h,modelBuilder:e,widgetModel:i,widgetService:j}});